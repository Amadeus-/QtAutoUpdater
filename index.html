<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>QtAutoUpdater: QtAutoUpdater</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtAutoUpdater
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">A Qt library to automatically check for updates and install them</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespace_qt_auto_updater.html" title="The QtAutoUpdater namespace holds all classes that are related with the updater. ">QtAutoUpdater</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://opensource.org/licenses/BSD-3-Clause"></a></p>
<p>The <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> auto updater library is a library to automatically check for updates and install them. This repository includes:</p><ul>
<li>A library with the basic updater (without any GUI)</li>
<li>A second library that requires the first one and adds basic GUI features</li>
</ul>
<p>Github repository: <a href="https://github.com/Skycoder42/QtAutoUpdater">https://github.com/Skycoder42/QtAutoUpdater</a></p>
<h2>Main Features</h2>
<h3>Core Library</h3>
<ul>
<li>Automatic Check for updates using the maintenancetool</li>
<li>Can automatically run the maintenancetool after the application finished<ul>
<li>To run as admin/root, either use the GUI library or implement it yourself (via an interface)</li>
</ul>
</li>
<li>Simple update scheduling mechanism for the running instance</li>
</ul>
<h3>GUI Library</h3>
<ul>
<li>Requires Widgets (no direct QML-support, and I'm not intending to create one. The library can be used for QML applications, since it operates mostly with own windows. If you want to use the updater in QML, do the connection yourself!)</li>
<li>Automated controller to guide the user through the check-for-updates process<ul>
<li>customizable: you can decide what to show</li>
<li>extended information dialog or simple dialog to show basic information about the update</li>
</ul>
</li>
<li>"Run as Admin/root" fully supported on all 3 platforms</li>
<li>UpdateAction -&gt; a <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtwidgets/qtwidgets.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qaction.html">QAction</a> that starts the updater</li>
<li>UpdateButton -&gt; a button with a busy-indicator to to the same</li>
<li><em>Prepared</em> for translation</li>
</ul>
<h4>Screenshots</h4>
<p>Here some sample screenshots of the gui (The rocket of the information dialog is the "application icon" and depends on your application)</p>
<table class="doxtable">
<tr>
<th>Dialog Sample </th><th>Windows </th><th>Mac </th><th>X11  </th></tr>
<tr>
<td>Progress Dialog </td><td><div class="image">
<img src="win_dialog_progress.png" alt="win_dialog_progress.png"/>
<div class="caption">
Progress Dialog</div></div>
 </td><td><div class="image">
<img src="mac_dialog_progress.png" alt="mac_dialog_progress.png"/>
<div class="caption">
Progress Dialog</div></div>
 </td><td><div class="image">
<img src="x11_dialog_progress.png" alt="x11_dialog_progress.png"/>
<div class="caption">
Progress Dialog</div></div>
 </td></tr>
<tr>
<td>Information Dialog </td><td><div class="image">
<img src="win_dialog_info.png" alt="win_dialog_info.png"/>
<div class="caption">
Information Dialog</div></div>
 </td><td><div class="image">
<img src="mac_dialog_info.png" alt="mac_dialog_info.png"/>
<div class="caption">
Information Dialog</div></div>
 </td><td><div class="image">
<img src="x11_dialog_info.png" alt="x11_dialog_info.png"/>
<div class="caption">
Information Dialog</div></div>
 </td></tr>
<tr>
<td>Update Button </td><td><div class="image">
<img src="win_button_checking.png" alt="win_button_checking.png"/>
<div class="caption">
Update Button</div></div>
 </td><td><div class="image">
<img src="mac_button_checking.png" alt="mac_button_checking.png"/>
<div class="caption">
Update Button</div></div>
 </td><td><div class="image">
<img src="x11_button_checking.png" alt="x11_button_checking.png"/>
<div class="caption">
Update Button</div></div>
 </td></tr>
<tr>
<td>Update Action </td><td><div class="image">
<img src="win_action.png" alt="win_action.png"/>
<div class="caption">
Update Action</div></div>
 </td><td><div class="image">
<img src="mac_action.png" alt="mac_action.png"/>
<div class="caption">
Update Action</div></div>
 </td><td><div class="image">
<img src="x11_action.png" alt="x11_action.png"/>
<div class="caption">
Update Action</div></div>
 </td></tr>
</table>
<h2>Requirements</h2>
<ul>
<li><a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> Installer Framework: The updater requires the application to be installed using the framework and will use the frameworks update mechanism to check for updates (<a href="https://doc.qt.io/qtinstallerframework/,">https://doc.qt.io/qtinstallerframework/,</a> download at <a href="https://download.qt.io/official_releases/qt-installer-framework/">https://download.qt.io/official_releases/qt-installer-framework/</a>)</li>
<li>C++11 - The library makes heavy use of it's features</li>
<li><a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> 5.6 (Since I'm using new features of 5.6, older Versions won't work without modification)<ul>
<li>If you are using <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> 5.5, you can download version 1.0.0. It's the only one that supports it</li>
</ul>
</li>
<li>Since the Installer Framework supports Windows, Mac and X11 only, it's the same for this library</li>
</ul>
<h2>Getting started</h2>
<p>The usage of this library is not that complicated. However, to make this work you will have to use the <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> Installer Framework to create and installer/updater. If you already now how to to that, just check out the examples below. If not, here are some links that will explain how to create an online-installer using the framework. Once you have figured out how to do that, it's only a small step to the updater library:</p><ul>
<li><a href="https://doc.qt.io/qtinstallerframework/ifw-tutorial.html">QtIFW - Tutorial: Creating an Installer</a>: Check this to learn how to create an installer in general. Don't be afraid, it's a very short tutorial</li>
<li><a href="https://doc.qt.io/qtinstallerframework/ifw-online-installers.html">QtIFW - Creating Online Installers</a>: This page will tell you how to create an online installer from your offline installer - in just 2 steps</li>
<li><a href="https://doc.qt.io/qtinstallerframework/ifw-updates.html">QtIFW - Promoting Updates</a>: And this site explains how to create updates</li>
</ul>
<h3>Examples</h3>
<p><b>Important:</b><br />
 Since this library requires the maintenancetool that is deployed with every <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> Installer Framework installation, the examples cannot be tested without a maintenancetool! If you intend to use this library, the maintenancetool will be available for your final application. For testing purpose or the examples, I set the path to the <code>MaintenanceTool</code> that is deployed with the installation of <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> (or any other maintenancetool). So make shure to adjust the path if you try to run the examples.</p>
<h4>IcoDroid</h4>
<p>Not a real example, but an application of mine that makes use of the library. If you want to see a full and working example with an installer, check out <a href="https://github.com/Skycoder42/IcoDroid">https://github.com/Skycoder42/IcoDroid</a>. (Not always using the newest version of this library!)</p>
<h4>Updater</h4>
<p>The following example shows the basic usage of the updater. Only the core library is required for this example. It creates a new updater instance that is connected to the maintenancetool located at "C:/Qt/MaintenanceTool". As soon as the application starts, it will check for updates and print the update result. If updates are available, their details will be printed and the maintenancetool is scheduled to start on exit. In both cases, the application will quit afterwards.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;updater.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="codeRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qcoreapplication.html">QCoreApplication</a> a(argc, argv);</div><div class="line">    <span class="comment">//create the updater with the application as parent -&gt; will live long enough start the tool on exit</span></div><div class="line">    <a class="code" href="class_qt_auto_updater_1_1_updater.html">QtAutoUpdater::Updater</a> *updater = <span class="keyword">new</span> <a class="code" href="class_qt_auto_updater_1_1_updater.html">QtAutoUpdater::Updater</a>(<span class="stringliteral">&quot;C:/Qt/MaintenanceTool&quot;</span>, &amp;a);<span class="comment">//.exe is automatically added</span></div><div class="line"></div><div class="line">    <a class="codeRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qobject.html#connect">QObject::connect</a>(updater, &amp;<a class="code" href="class_qt_auto_updater_1_1_updater.html#adcbda9d4e218cd497027b1d3fed3d5b5">QtAutoUpdater::Updater::checkUpdatesDone</a>, [updater](<span class="keywordtype">bool</span> hasUpdate, <span class="keywordtype">bool</span> hasError) {</div><div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Has updates:&quot;</span> &lt;&lt; hasUpdate &lt;&lt; <span class="stringliteral">&quot;\nHas errors:&quot;</span> &lt;&lt; hasError;</div><div class="line">        <span class="keywordflow">if</span>(hasUpdate) {</div><div class="line">            <span class="comment">//As soon as the application quits, the maintenancetool will be started in update mode</span></div><div class="line">            updater-&gt;<a class="code" href="class_qt_auto_updater_1_1_updater.html#ab23679ad18072646028085b9e77ecc0d">runUpdaterOnExit</a>();</div><div class="line">            qDebug() &lt;&lt; <span class="stringliteral">&quot;Update info:&quot;</span> &lt;&lt; updater-&gt;<a class="code" href="class_qt_auto_updater_1_1_updater.html#aa3b025dad1bae7d7ac2f7ade23955fc4">updateInfo</a>();</div><div class="line">        }</div><div class="line">        <span class="comment">//Quit the application</span></div><div class="line">        qApp-&gt;quit();</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="comment">//start the update check</span></div><div class="line">    updater-&gt;<a class="code" href="class_qt_auto_updater_1_1_updater.html#a104b10bae48235afce2826ab1385c0b9">checkForUpdates</a>();</div><div class="line">    <span class="keywordflow">return</span> a.exec();</div><div class="line">}</div></div><!-- fragment --><h4>UpdateController</h4>
<p>This example will show you the full dialog flow of the controller. Both libraries are required for this example. Since there is no mainwindow in this example, you will only see the controller dialogs. Please not that you can control how much of that dialogset will be shown to the user. This example is <em>reduced</em>! for a full example with all parts of the controller, check the <code>Tests/WidgetsTest</code> application.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;updatecontroller.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="codeRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtwidgets/qtwidgets.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qapplication.html">QApplication</a> a(argc, argv);</div><div class="line">    <span class="comment">//Since there is no mainwindow, the various dialogs should not quit the app</span></div><div class="line">    <a class="codeRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtgui/qtgui.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qguiapplication.html#quitOnLastWindowClosed-prop">QApplication::setQuitOnLastWindowClosed</a>(<span class="keyword">false</span>);</div><div class="line">    <span class="comment">//create the update controller with the application as parent -&gt; will live long enough start the tool on exit</span></div><div class="line">    <span class="comment">//since there is no parent window, all dialogs will be top-level windows</span></div><div class="line">    <a class="code" href="class_qt_auto_updater_1_1_update_controller.html">QtAutoUpdater::UpdateController</a> *controller = <span class="keyword">new</span> <a class="code" href="class_qt_auto_updater_1_1_update_controller.html">QtAutoUpdater::UpdateController</a>(<span class="stringliteral">&quot;C:/Qt/MaintenanceTool&quot;</span>, &amp;a);<span class="comment">//.exe is automatically added</span></div><div class="line"></div><div class="line">    <a class="codeRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qobject.html#connect">QObject::connect</a>(updater, &amp;<a class="code" href="class_qt_auto_updater_1_1_update_controller.html#a652a18702e98bf3d8bcb8af4293b6198">QtAutoUpdater::UpdateController::runningChanged</a>, [updater](<span class="keywordtype">bool</span> running) {</div><div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Running changed:&quot;</span> &lt;&lt; running;</div><div class="line">        <span class="comment">//quit the application as soon as the updating finished</span></div><div class="line">        <span class="keywordflow">if</span>(!running)</div><div class="line">            qApp-&gt;quit();</div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="comment">//start the update check -&gt; AskLevel to give the user maximum control</span></div><div class="line">    controller-&gt;<a class="code" href="class_qt_auto_updater_1_1_update_controller.html#a3532c423447b95fea9042b5e6034f13b">start</a>(<a class="code" href="class_qt_auto_updater_1_1_update_controller.html#a3c3df76116942329e05f639e60bbf5a2a4478273347d97859fd591b5c302ecc54">QtAutoUpdater::UpdateController::AskLevel</a>);</div><div class="line">    <span class="keywordflow">return</span> a.exec();</div><div class="line">}</div></div><!-- fragment --><h2>Documentation</h2>
<p>The documentation is available within the releases and on <a href="https://skycoder42.github.io/QtAutoUpdater/">github pages</a>.</p>
<p>The documentation was created using <a href="http://www.stack.nl/~dimitri/doxygen/">doxygen</a>. It includes an HTML-documentation and Qt-Help files that can be included into QtCreator (QtAssistant) to show F1-Help (See <a href="https://doc.qt.io/qtcreator/creator-help.html#adding-external-documentation">Adding External Documentation</a> for more details).</p>
<h2>Translations</h2>
<p>The core library does not need any translation, because it won't show anything to the user. The Gui library however does. The project is prepared for translation. But since I speak only english and german, those are the only languages I can provide translations for. However, you can easily create the translations yourself. The file <code>AutoUpdaterGui/translations/QtAutoUpdaterController_template.ts</code> is a ready-made TS file. Just rename it (e.g. to <code>QtAutoUpdaterController_jp.ts</code>) and open it with the QtLinguist to create the translations.</p>
<h2>Downloads</h2>
<p>Downloads are available via <a href="https://github.com/Skycoder42/QtAutoUpdater/releases">github releases</a>. The downloads include:</p><ul>
<li>A .pri file for easy project includes (Just add <code>include(&lt;path_to&gt;/qtautoupdater.pri)</code> to your project and all the includes/libray imports/... will be done by that file!)</li>
<li>Qt5.6 precompiled binaries for:<ul>
<li>Windows<ul>
<li>msvc2015 x86</li>
<li>msvc2015 x64</li>
<li>mingw 4.9.2</li>
</ul>
</li>
<li>OsX<ul>
<li>clang x64</li>
</ul>
</li>
<li>X11 (Linux)<ul>
<li>gcc x64</li>
</ul>
</li>
</ul>
</li>
<li>The (public) header files needed for these binaries</li>
<li>The HTML and QtHelp documentation</li>
<li>The german translations and the translation template file</li>
</ul>
<p><b>Note:</b><br />
 The downloads are "libraries", not dll/so/dylib files. If you want to use them as dynamic library, you will have to modify the code and build them yourself.</p>
<h2>Building it yourself</h2>
<p>If you want to build the <a class="el" href="namespace_qt_auto_updater.html" title="The QtAutoUpdater namespace holds all classes that are related with the updater. ">QtAutoUpdater</a> yourself, make shure that you fullfill all the requirements listed above. To build it, the only other dependencies beside <a class="elRef" target="_blank" doxygen="C:/Qt/Docs/Qt-5.6/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qt.html">Qt</a> itself is the <a href="https://github.com/Skycoder42/DialogMaster">DialogMaster</a>, which is referenced as submodule. Just make shure to clone the repository recursivly. But please note that the project only supports Desktop Windows, OsX and X11. Trying to build it for other configurations will propably fail!</p>
<h2>Icon sources/Links</h2>
<p>Most icons have been found using <a href="http://www.iconarchive.com/">IconArchive</a></p>
<h3>GUI Library</h3>
<ul>
<li><a href="http://www.fatcow.com/free-icons">http://www.fatcow.com/free-icons</a></li>
<li><a href="http://www.ajaxload.info/">http://www.ajaxload.info/</a></li>
</ul>
<h3>Test Project</h3>
<ul>
<li><a href="http://www.oxygen-icons.org/">http://www.oxygen-icons.org/</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 29 2016 21:21:25 for QtAutoUpdater by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
